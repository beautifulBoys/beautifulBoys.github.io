(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{"4yiN":function(se,O,D){"use strict";D.r(O),D.d(O,"setupTypeScript",function(){return te}),D.d(O,"setupJavaScript",function(){return re}),D.d(O,"getJavaScriptWorker",function(){return ne}),D.d(O,"getTypeScriptWorker",function(){return ie});var f=D("v0SU"),W=function(t,r,e,s){function a(n){return n instanceof e?n:new e(function(o){o(n)})}return new(e||(e=Promise))(function(n,o){function l(u){try{i(s.next(u))}catch(c){o(c)}}function g(u){try{i(s.throw(u))}catch(c){o(c)}}function i(u){u.done?n(u.value):a(u.value).then(l,g)}i((s=s.apply(t,r||[])).next())})},H=function(t,r){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},s,a,n,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(i){return function(u){return g([i,u])}}function g(i){if(s)throw new TypeError("Generator is already executing.");for(;e;)try{if(s=1,a&&(n=i[0]&2?a.return:i[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,i[1])).done)return n;switch(a=0,n&&(i=[i[0]&2,n.value]),i[0]){case 0:case 1:n=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,a=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!n||i[1]>n[0]&&i[1]<n[3])){e.label=i[1];break}if(i[0]===6&&e.label<n[1]){e.label=n[1],n=i;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(i);break}n[2]&&e.ops.pop(),e.trys.pop();continue}i=r.call(t,e)}catch(u){i=[6,u],a=0}finally{s=n=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},V=function(){function t(r,e){var s=this;this._modeId=r,this._defaults=e,this._worker=null,this._client=null,this._configChangeListener=this._defaults.onDidChange(function(){return s._stopWorker()}),this._updateExtraLibsToken=0,this._extraLibsChangeListener=this._defaults.onDidExtraLibsChange(function(){return s._updateExtraLibs()})}return t.prototype._stopWorker=function(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null},t.prototype.dispose=function(){this._configChangeListener.dispose(),this._extraLibsChangeListener.dispose(),this._stopWorker()},t.prototype._updateExtraLibs=function(){return W(this,void 0,void 0,function(){var r,e;return H(this,function(s){switch(s.label){case 0:return this._worker?(r=++this._updateExtraLibsToken,[4,this._worker.getProxy()]):[2];case 1:return e=s.sent(),this._updateExtraLibsToken!==r?[2]:(e.updateExtraLibs(this._defaults.getExtraLibs()),[2])}})})},t.prototype._getClient=function(){var r=this;if(!this._client){this._worker=f.editor.createWebWorker({moduleId:"vs/language/typescript/tsWorker",label:this._modeId,keepIdleModels:!0,createData:{compilerOptions:this._defaults.getCompilerOptions(),extraLibs:this._defaults.getExtraLibs(),customWorkerPath:this._defaults.workerOptions.customWorkerPath}});var e=this._worker.getProxy();this._defaults.getEagerModelSync()&&(e=e.then(function(s){return r._worker?r._worker.withSyncedResources(f.editor.getModels().filter(function(a){return a.getModeId()===r._modeId}).map(function(a){return a.uri})):s})),this._client=e}return this._client},t.prototype.getLanguageServiceWorker=function(){for(var r=this,e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];var a;return this._getClient().then(function(n){a=n}).then(function(n){if(r._worker)return r._worker.withSyncedResources(e)}).then(function(n){return a})},t}(),p={};p["lib.d.ts"]=!0,p["lib.dom.d.ts"]=!0,p["lib.dom.iterable.d.ts"]=!0,p["lib.es2015.collection.d.ts"]=!0,p["lib.es2015.core.d.ts"]=!0,p["lib.es2015.d.ts"]=!0,p["lib.es2015.generator.d.ts"]=!0,p["lib.es2015.iterable.d.ts"]=!0,p["lib.es2015.promise.d.ts"]=!0,p["lib.es2015.proxy.d.ts"]=!0,p["lib.es2015.reflect.d.ts"]=!0,p["lib.es2015.symbol.d.ts"]=!0,p["lib.es2015.symbol.wellknown.d.ts"]=!0,p["lib.es2016.array.include.d.ts"]=!0,p["lib.es2016.d.ts"]=!0,p["lib.es2016.full.d.ts"]=!0,p["lib.es2017.d.ts"]=!0,p["lib.es2017.full.d.ts"]=!0,p["lib.es2017.intl.d.ts"]=!0,p["lib.es2017.object.d.ts"]=!0,p["lib.es2017.sharedmemory.d.ts"]=!0,p["lib.es2017.string.d.ts"]=!0,p["lib.es2017.typedarrays.d.ts"]=!0,p["lib.es2018.asyncgenerator.d.ts"]=!0,p["lib.es2018.asynciterable.d.ts"]=!0,p["lib.es2018.d.ts"]=!0,p["lib.es2018.full.d.ts"]=!0,p["lib.es2018.intl.d.ts"]=!0,p["lib.es2018.promise.d.ts"]=!0,p["lib.es2018.regexp.d.ts"]=!0,p["lib.es2019.array.d.ts"]=!0,p["lib.es2019.d.ts"]=!0,p["lib.es2019.full.d.ts"]=!0,p["lib.es2019.object.d.ts"]=!0,p["lib.es2019.string.d.ts"]=!0,p["lib.es2019.symbol.d.ts"]=!0,p["lib.es2020.bigint.d.ts"]=!0,p["lib.es2020.d.ts"]=!0,p["lib.es2020.full.d.ts"]=!0,p["lib.es2020.intl.d.ts"]=!0,p["lib.es2020.promise.d.ts"]=!0,p["lib.es2020.sharedmemory.d.ts"]=!0,p["lib.es2020.string.d.ts"]=!0,p["lib.es2020.symbol.wellknown.d.ts"]=!0,p["lib.es5.d.ts"]=!0,p["lib.es6.d.ts"]=!0,p["lib.esnext.d.ts"]=!0,p["lib.esnext.full.d.ts"]=!0,p["lib.esnext.intl.d.ts"]=!0,p["lib.esnext.promise.d.ts"]=!0,p["lib.esnext.string.d.ts"]=!0,p["lib.esnext.weakref.d.ts"]=!0,p["lib.scripthost.d.ts"]=!0,p["lib.webworker.d.ts"]=!0,p["lib.webworker.importscripts.d.ts"]=!0,p["lib.webworker.iterable.d.ts"]=!0;var C=function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])},t(e,s)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function s(){this.constructor=r}r.prototype=e===null?Object.create(e):(s.prototype=e.prototype,new s)}}(),k=function(t,r,e,s){function a(n){return n instanceof e?n:new e(function(o){o(n)})}return new(e||(e=Promise))(function(n,o){function l(u){try{i(s.next(u))}catch(c){o(c)}}function g(u){try{i(s.throw(u))}catch(c){o(c)}}function i(u){u.done?n(u.value):a(u.value).then(l,g)}i((s=s.apply(t,r||[])).next())})},x=function(t,r){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},s,a,n,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(i){return function(u){return g([i,u])}}function g(i){if(s)throw new TypeError("Generator is already executing.");for(;e;)try{if(s=1,a&&(n=i[0]&2?a.return:i[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,i[1])).done)return n;switch(a=0,n&&(i=[i[0]&2,n.value]),i[0]){case 0:case 1:n=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,a=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!n||i[1]>n[0]&&i[1]<n[3])){e.label=i[1];break}if(i[0]===6&&e.label<n[1]){e.label=n[1],n=i;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(i);break}n[2]&&e.ops.pop(),e.trys.pop();continue}i=r.call(t,e)}catch(u){i=[6,u],a=0}finally{s=n=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},N;(function(t){t[t.None=0]="None",t[t.Block=1]="Block",t[t.Smart=2]="Smart"})(N||(N={}));function P(t,r,e){if(e===void 0&&(e=0),typeof t=="string")return t;if(t===void 0)return"";var s="";if(e){s+=r;for(var a=0;a<e;a++)s+="  "}if(s+=t.messageText,e++,t.next)for(var n=0,o=t.next;n<o.length;n++){var l=o[n];s+=P(l,r,e)}return s}function A(t){return t?t.map(function(r){return r.text}).join(""):""}var _=function(){function t(r){this._worker=r}return t.prototype._textSpanToRange=function(r,e){var s=r.getPositionAt(e.start),a=r.getPositionAt(e.start+e.length),n=s.lineNumber,o=s.column,l=a.lineNumber,g=a.column;return{startLineNumber:n,startColumn:o,endLineNumber:l,endColumn:g}},t}(),j=function(){function t(r){this._worker=r,this._libFiles={},this._hasFetchedLibFiles=!1,this._fetchLibFilesPromise=null}return t.prototype.isLibFile=function(r){return r&&r.path.indexOf("/lib.")===0?!!p[r.path.slice(1)]:!1},t.prototype.getOrCreateModel=function(r){var e=f.editor.getModel(r);return e||(this.isLibFile(r)&&this._hasFetchedLibFiles?f.editor.createModel(this._libFiles[r.path.slice(1)],"typescript",r):null)},t.prototype._containsLibFile=function(r){for(var e=0,s=r;e<s.length;e++){var a=s[e];if(this.isLibFile(a))return!0}return!1},t.prototype.fetchLibFilesIfNecessary=function(r){return k(this,void 0,void 0,function(){return x(this,function(e){switch(e.label){case 0:return this._containsLibFile(r)?[4,this._fetchLibFiles()]:[2];case 1:return e.sent(),[2]}})})},t.prototype._fetchLibFiles=function(){var r=this;return this._fetchLibFilesPromise||(this._fetchLibFilesPromise=this._worker().then(function(e){return e.getLibFiles()}).then(function(e){r._hasFetchedLibFiles=!0,r._libFiles=e})),this._fetchLibFilesPromise},t}(),T;(function(t){t[t.Warning=0]="Warning",t[t.Error=1]="Error",t[t.Suggestion=2]="Suggestion",t[t.Message=3]="Message"})(T||(T={}));var U=function(t){C(r,t);function r(e,s,a,n){var o=t.call(this,n)||this;o._libFiles=e,o._defaults=s,o._selector=a,o._disposables=[],o._listener=Object.create(null);var l=function(c){if(c.getModeId()===a){var d,h=c.onDidChangeContent(function(){clearTimeout(d),d=setTimeout(function(){return o._doValidate(c)},500)});o._listener[c.uri.toString()]={dispose:function(){h.dispose(),clearTimeout(d)}},o._doValidate(c)}},g=function(c){f.editor.setModelMarkers(c,o._selector,[]);var d=c.uri.toString();o._listener[d]&&(o._listener[d].dispose(),delete o._listener[d])};o._disposables.push(f.editor.onDidCreateModel(l)),o._disposables.push(f.editor.onWillDisposeModel(g)),o._disposables.push(f.editor.onDidChangeModelLanguage(function(u){g(u.model),l(u.model)})),o._disposables.push({dispose:function(){for(var c=0,d=f.editor.getModels();c<d.length;c++){var h=d[c];g(h)}}});var i=function(){for(var c=0,d=f.editor.getModels();c<d.length;c++){var h=d[c];g(h),l(h)}};return o._disposables.push(o._defaults.onDidChange(i)),o._disposables.push(o._defaults.onDidExtraLibsChange(i)),f.editor.getModels().forEach(l),o}return r.prototype.dispose=function(){this._disposables.forEach(function(e){return e&&e.dispose()}),this._disposables=[]},r.prototype._doValidate=function(e){return k(this,void 0,void 0,function(){var s,a,n,o,l,g,i,u,c,d=this;return x(this,function(h){switch(h.label){case 0:return[4,this._worker(e.uri)];case 1:return s=h.sent(),e.isDisposed()?[2]:(a=[],n=this._defaults.getDiagnosticsOptions(),o=n.noSyntaxValidation,l=n.noSemanticValidation,g=n.noSuggestionDiagnostics,o||a.push(s.getSyntacticDiagnostics(e.uri.toString())),l||a.push(s.getSemanticDiagnostics(e.uri.toString())),g||a.push(s.getSuggestionDiagnostics(e.uri.toString())),[4,Promise.all(a)]);case 2:return i=h.sent(),!i||e.isDisposed()?[2]:(u=i.reduce(function(b,y){return y.concat(b)},[]).filter(function(b){return(d._defaults.getDiagnosticsOptions().diagnosticCodesToIgnore||[]).indexOf(b.code)===-1}),c=u.map(function(b){return b.relatedInformation||[]}).reduce(function(b,y){return y.concat(b)},[]).map(function(b){return b.file?f.Uri.parse(b.file.fileName):null}),[4,this._libFiles.fetchLibFilesIfNecessary(c)]);case 3:return h.sent(),e.isDisposed()?[2]:(f.editor.setModelMarkers(e,this._selector,u.map(function(b){return d._convertDiagnostics(e,b)})),[2])}})})},r.prototype._convertDiagnostics=function(e,s){var a=s.start||0,n=s.length||1,o=e.getPositionAt(a),l=o.lineNumber,g=o.column,i=e.getPositionAt(a+n),u=i.lineNumber,c=i.column,d=[];return s.reportsUnnecessary&&d.push(f.MarkerTag.Unnecessary),s.reportsDeprecated&&d.push(f.MarkerTag.Deprecated),{severity:this._tsDiagnosticCategoryToMarkerSeverity(s.category),startLineNumber:l,startColumn:g,endLineNumber:u,endColumn:c,message:P(s.messageText,`
`),code:s.code.toString(),tags:d,relatedInformation:this._convertRelatedInformation(e,s.relatedInformation)}},r.prototype._convertRelatedInformation=function(e,s){var a=this;if(!!s){var n=[];return s.forEach(function(o){var l=e;if(o.file){var g=f.Uri.parse(o.file.fileName);l=a._libFiles.getOrCreateModel(g)}if(!!l){var i=o.start||0,u=o.length||1,c=l.getPositionAt(i),d=c.lineNumber,h=c.column,b=l.getPositionAt(i+u),y=b.lineNumber,m=b.column;n.push({resource:l.uri,startLineNumber:d,startColumn:h,endLineNumber:y,endColumn:m,message:P(o.messageText,`
`)})}}),n}},r.prototype._tsDiagnosticCategoryToMarkerSeverity=function(e){switch(e){case T.Error:return f.MarkerSeverity.Error;case T.Message:return f.MarkerSeverity.Info;case T.Warning:return f.MarkerSeverity.Warning;case T.Suggestion:return f.MarkerSeverity.Hint}return f.MarkerSeverity.Info},r}(_),B=function(t){C(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"triggerCharacters",{get:function(){return["."]},enumerable:!1,configurable:!0}),r.prototype.provideCompletionItems=function(e,s,a,n){return k(this,void 0,void 0,function(){var o,l,g,i,u,c,d;return x(this,function(h){switch(h.label){case 0:return o=e.getWordUntilPosition(s),l=new f.Range(s.lineNumber,o.startColumn,s.lineNumber,o.endColumn),g=e.uri,i=e.getOffsetAt(s),[4,this._worker(g)];case 1:return u=h.sent(),e.isDisposed()?[2]:[4,u.getCompletionsAtPosition(g.toString(),i)];case 2:return c=h.sent(),!c||e.isDisposed()?[2]:(d=c.entries.map(function(b){var y,m=l;if(b.replacementSpan){var S=e.getPositionAt(b.replacementSpan.start),F=e.getPositionAt(b.replacementSpan.start+b.replacementSpan.length);m=new f.Range(S.lineNumber,S.column,F.lineNumber,F.column)}var E=[];return((y=b.kindModifiers)===null||y===void 0?void 0:y.indexOf("deprecated"))!==-1&&E.push(f.languages.CompletionItemTag.Deprecated),{uri:g,position:s,offset:i,range:m,label:b.name,insertText:b.name,sortText:b.sortText,kind:r.convertKind(b.kind),tags:E}}),[2,{suggestions:d}])}})})},r.prototype.resolveCompletionItem=function(e,s){return k(this,void 0,void 0,function(){var a,n,o,l,g,i;return x(this,function(u){switch(u.label){case 0:return a=e,n=a.uri,o=a.position,l=a.offset,[4,this._worker(n)];case 1:return g=u.sent(),[4,g.getCompletionEntryDetails(n.toString(),l,a.label)];case 2:return i=u.sent(),i?[2,{uri:n,position:o,label:i.name,kind:r.convertKind(i.kind),detail:A(i.displayParts),documentation:{value:r.createDocumentationString(i)}}]:[2,a]}})})},r.convertKind=function(e){switch(e){case v.primitiveType:case v.keyword:return f.languages.CompletionItemKind.Keyword;case v.variable:case v.localVariable:return f.languages.CompletionItemKind.Variable;case v.memberVariable:case v.memberGetAccessor:case v.memberSetAccessor:return f.languages.CompletionItemKind.Field;case v.function:case v.memberFunction:case v.constructSignature:case v.callSignature:case v.indexSignature:return f.languages.CompletionItemKind.Function;case v.enum:return f.languages.CompletionItemKind.Enum;case v.module:return f.languages.CompletionItemKind.Module;case v.class:return f.languages.CompletionItemKind.Class;case v.interface:return f.languages.CompletionItemKind.Interface;case v.warning:return f.languages.CompletionItemKind.File}return f.languages.CompletionItemKind.Property},r.createDocumentationString=function(e){var s=A(e.documentation);if(e.tags)for(var a=0,n=e.tags;a<n.length;a++){var o=n[a];s+=`

`+R(o)}return s},r}(_);function R(t){var r="*@"+t.name+"*";if(t.name==="param"&&t.text){var e=t.text.split(" "),s=e[0],a=e.slice(1);r+="`"+s+"`",a.length>0&&(r+=" \u2014 "+a.join(" "))}else t.text&&(r+=" \u2014 "+t.text);return r}var J=function(t){C(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.signatureHelpTriggerCharacters=["(",","],e}return r._toSignatureHelpTriggerReason=function(e){switch(e.triggerKind){case f.languages.SignatureHelpTriggerKind.TriggerCharacter:return e.triggerCharacter?e.isRetrigger?{kind:"retrigger",triggerCharacter:e.triggerCharacter}:{kind:"characterTyped",triggerCharacter:e.triggerCharacter}:{kind:"invoked"};case f.languages.SignatureHelpTriggerKind.ContentChange:return e.isRetrigger?{kind:"retrigger"}:{kind:"invoked"};case f.languages.SignatureHelpTriggerKind.Invoke:default:return{kind:"invoked"}}},r.prototype.provideSignatureHelp=function(e,s,a,n){return k(this,void 0,void 0,function(){var o,l,g,i,u;return x(this,function(c){switch(c.label){case 0:return o=e.uri,l=e.getOffsetAt(s),[4,this._worker(o)];case 1:return g=c.sent(),e.isDisposed()?[2]:[4,g.getSignatureHelpItems(o.toString(),l,{triggerReason:r._toSignatureHelpTriggerReason(n)})];case 2:return i=c.sent(),!i||e.isDisposed()?[2]:(u={activeSignature:i.selectedItemIndex,activeParameter:i.argumentIndex,signatures:[]},i.items.forEach(function(d){var h={label:"",parameters:[]};h.documentation={value:A(d.documentation)},h.label+=A(d.prefixDisplayParts),d.parameters.forEach(function(b,y,m){var S=A(b.displayParts),F={label:S,documentation:{value:A(b.documentation)}};h.label+=S,h.parameters.push(F),y<m.length-1&&(h.label+=A(d.separatorDisplayParts))}),h.label+=A(d.suffixDisplayParts),u.signatures.push(h)}),[2,{value:u,dispose:function(){}}])}})})},r}(_),z=function(t){C(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.provideHover=function(e,s,a){return k(this,void 0,void 0,function(){var n,o,l,g,i,u,c;return x(this,function(d){switch(d.label){case 0:return n=e.uri,o=e.getOffsetAt(s),[4,this._worker(n)];case 1:return l=d.sent(),e.isDisposed()?[2]:[4,l.getQuickInfoAtPosition(n.toString(),o)];case 2:return g=d.sent(),!g||e.isDisposed()?[2]:(i=A(g.documentation),u=g.tags?g.tags.map(function(h){return R(h)}).join(`  

`):"",c=A(g.displayParts),[2,{range:this._textSpanToRange(e,g.textSpan),contents:[{value:"```typescript\n"+c+"\n```\n"},{value:i+(u?`

`+u:"")}]}])}})})},r}(_),G=function(t){C(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.provideDocumentHighlights=function(e,s,a){return k(this,void 0,void 0,function(){var n,o,l,g,i=this;return x(this,function(u){switch(u.label){case 0:return n=e.uri,o=e.getOffsetAt(s),[4,this._worker(n)];case 1:return l=u.sent(),e.isDisposed()?[2]:[4,l.getOccurrencesAtPosition(n.toString(),o)];case 2:return g=u.sent(),!g||e.isDisposed()?[2]:[2,g.map(function(c){return{range:i._textSpanToRange(e,c.textSpan),kind:c.isWriteAccess?f.languages.DocumentHighlightKind.Write:f.languages.DocumentHighlightKind.Text}})]}})})},r}(_),Q=function(t){C(r,t);function r(e,s){var a=t.call(this,s)||this;return a._libFiles=e,a}return r.prototype.provideDefinition=function(e,s,a){return k(this,void 0,void 0,function(){var n,o,l,g,i,u,c,d,h,b;return x(this,function(y){switch(y.label){case 0:return n=e.uri,o=e.getOffsetAt(s),[4,this._worker(n)];case 1:return l=y.sent(),e.isDisposed()?[2]:[4,l.getDefinitionAtPosition(n.toString(),o)];case 2:return g=y.sent(),!g||e.isDisposed()?[2]:[4,this._libFiles.fetchLibFilesIfNecessary(g.map(function(m){return f.Uri.parse(m.fileName)}))];case 3:if(y.sent(),e.isDisposed())return[2];for(i=[],u=0,c=g;u<c.length;u++)d=c[u],h=f.Uri.parse(d.fileName),b=this._libFiles.getOrCreateModel(h),b&&i.push({uri:h,range:this._textSpanToRange(b,d.textSpan)});return[2,i]}})})},r}(_),X=function(t){C(r,t);function r(e,s){var a=t.call(this,s)||this;return a._libFiles=e,a}return r.prototype.provideReferences=function(e,s,a,n){return k(this,void 0,void 0,function(){var o,l,g,i,u,c,d,h,b,y;return x(this,function(m){switch(m.label){case 0:return o=e.uri,l=e.getOffsetAt(s),[4,this._worker(o)];case 1:return g=m.sent(),e.isDisposed()?[2]:[4,g.getReferencesAtPosition(o.toString(),l)];case 2:return i=m.sent(),!i||e.isDisposed()?[2]:[4,this._libFiles.fetchLibFilesIfNecessary(i.map(function(S){return f.Uri.parse(S.fileName)}))];case 3:if(m.sent(),e.isDisposed())return[2];for(u=[],c=0,d=i;c<d.length;c++)h=d[c],b=f.Uri.parse(h.fileName),y=this._libFiles.getOrCreateModel(b),y&&u.push({uri:b,range:this._textSpanToRange(y,h.textSpan)});return[2,u]}})})},r}(_),Y=function(t){C(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.provideDocumentSymbols=function(e,s){return k(this,void 0,void 0,function(){var a,n,o,l,g,i=this;return x(this,function(u){switch(u.label){case 0:return a=e.uri,[4,this._worker(a)];case 1:return n=u.sent(),e.isDisposed()?[2]:[4,n.getNavigationBarItems(a.toString())];case 2:return o=u.sent(),!o||e.isDisposed()?[2]:(l=function(d,h,b){var y={name:h.text,detail:"",kind:w[h.kind]||f.languages.SymbolKind.Variable,range:i._textSpanToRange(e,h.spans[0]),selectionRange:i._textSpanToRange(e,h.spans[0]),tags:[],containerName:b};if(h.childItems&&h.childItems.length>0)for(var m=0,S=h.childItems;m<S.length;m++){var F=S[m];l(d,F,y.name)}d.push(y)},g=[],o.forEach(function(c){return l(g,c)}),[2,g])}})})},r}(_),v=function(){function t(){}return t.unknown="",t.keyword="keyword",t.script="script",t.module="module",t.class="class",t.interface="interface",t.type="type",t.enum="enum",t.variable="var",t.localVariable="local var",t.function="function",t.localFunction="local function",t.memberFunction="method",t.memberGetAccessor="getter",t.memberSetAccessor="setter",t.memberVariable="property",t.constructorImplementation="constructor",t.callSignature="call",t.indexSignature="index",t.constructSignature="construct",t.parameter="parameter",t.typeParameter="type parameter",t.primitiveType="primitive type",t.label="label",t.alias="alias",t.const="const",t.let="let",t.warning="warning",t}(),w=Object.create(null);w[v.module]=f.languages.SymbolKind.Module,w[v.class]=f.languages.SymbolKind.Class,w[v.enum]=f.languages.SymbolKind.Enum,w[v.interface]=f.languages.SymbolKind.Interface,w[v.memberFunction]=f.languages.SymbolKind.Method,w[v.memberVariable]=f.languages.SymbolKind.Property,w[v.memberGetAccessor]=f.languages.SymbolKind.Property,w[v.memberSetAccessor]=f.languages.SymbolKind.Property,w[v.variable]=f.languages.SymbolKind.Variable,w[v.const]=f.languages.SymbolKind.Variable,w[v.localVariable]=f.languages.SymbolKind.Variable,w[v.variable]=f.languages.SymbolKind.Variable,w[v.function]=f.languages.SymbolKind.Function,w[v.localFunction]=f.languages.SymbolKind.Function;var L=function(t){C(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r._convertOptions=function(e){return{ConvertTabsToSpaces:e.insertSpaces,TabSize:e.tabSize,IndentSize:e.tabSize,IndentStyle:N.Smart,NewLineCharacter:`
`,InsertSpaceAfterCommaDelimiter:!0,InsertSpaceAfterSemicolonInForStatements:!0,InsertSpaceBeforeAndAfterBinaryOperators:!0,InsertSpaceAfterKeywordsInControlFlowStatements:!0,InsertSpaceAfterFunctionKeywordForAnonymousFunctions:!0,InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis:!1,InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets:!1,InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces:!1,PlaceOpenBraceOnNewLineForControlBlocks:!1,PlaceOpenBraceOnNewLineForFunctions:!1}},r.prototype._convertTextChanges=function(e,s){return{text:s.newText,range:this._textSpanToRange(e,s.span)}},r}(_),Z=function(t){C(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.provideDocumentRangeFormattingEdits=function(e,s,a,n){return k(this,void 0,void 0,function(){var o,l,g,i,u,c=this;return x(this,function(d){switch(d.label){case 0:return o=e.uri,l=e.getOffsetAt({lineNumber:s.startLineNumber,column:s.startColumn}),g=e.getOffsetAt({lineNumber:s.endLineNumber,column:s.endColumn}),[4,this._worker(o)];case 1:return i=d.sent(),e.isDisposed()?[2]:[4,i.getFormattingEditsForRange(o.toString(),l,g,L._convertOptions(a))];case 2:return u=d.sent(),!u||e.isDisposed()?[2]:[2,u.map(function(h){return c._convertTextChanges(e,h)})]}})})},r}(L),$=function(t){C(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"autoFormatTriggerCharacters",{get:function(){return[";","}",`
`]},enumerable:!1,configurable:!0}),r.prototype.provideOnTypeFormattingEdits=function(e,s,a,n,o){return k(this,void 0,void 0,function(){var l,g,i,u,c=this;return x(this,function(d){switch(d.label){case 0:return l=e.uri,g=e.getOffsetAt(s),[4,this._worker(l)];case 1:return i=d.sent(),e.isDisposed()?[2]:[4,i.getFormattingEditsAfterKeystroke(l.toString(),g,a,L._convertOptions(n))];case 2:return u=d.sent(),!u||e.isDisposed()?[2]:[2,u.map(function(h){return c._convertTextChanges(e,h)})]}})})},r}(L),q=function(t){C(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.provideCodeActions=function(e,s,a,n){return k(this,void 0,void 0,function(){var o,l,g,i,u,c,d,h,b=this;return x(this,function(y){switch(y.label){case 0:return o=e.uri,l=e.getOffsetAt({lineNumber:s.startLineNumber,column:s.startColumn}),g=e.getOffsetAt({lineNumber:s.endLineNumber,column:s.endColumn}),i=L._convertOptions(e.getOptions()),u=a.markers.filter(function(m){return m.code}).map(function(m){return m.code}).map(Number),[4,this._worker(o)];case 1:return c=y.sent(),e.isDisposed()?[2]:[4,c.getCodeFixesAtPosition(o.toString(),l,g,u,i)];case 2:return d=y.sent(),!d||e.isDisposed()?[2,{actions:[],dispose:function(){}}]:(h=d.filter(function(m){return m.changes.filter(function(S){return S.isNewFile}).length===0}).map(function(m){return b._tsCodeFixActionToMonacoCodeAction(e,a,m)}),[2,{actions:h,dispose:function(){}}])}})})},r.prototype._tsCodeFixActionToMonacoCodeAction=function(e,s,a){for(var n=[],o=0,l=a.changes;o<l.length;o++)for(var g=l[o],i=0,u=g.textChanges;i<u.length;i++){var c=u[i];n.push({resource:e.uri,edit:{range:this._textSpanToRange(e,c.span),text:c.newText}})}var d={title:a.description,edit:{edits:n},diagnostics:s.markers,kind:"quickfix"};return d},r}(L),ee=function(t){C(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.provideRenameEdits=function(e,s,a,n){return k(this,void 0,void 0,function(){var o,l,g,i,u,c,d,h,b,y,m,S;return x(this,function(F){switch(F.label){case 0:return o=e.uri,l=o.toString(),g=e.getOffsetAt(s),[4,this._worker(o)];case 1:return i=F.sent(),e.isDisposed()?[2]:[4,i.getRenameInfo(l,g,{allowRenameOfImportPath:!1})];case 2:if(u=F.sent(),u.canRename===!1)return[2,{edits:[],rejectReason:u.localizedErrorMessage}];if(u.fileToRename!==void 0)throw new Error("Renaming files is not supported.");return[4,i.findRenameLocations(l,g,!1,!1,!1)];case 3:if(c=F.sent(),!c||e.isDisposed())return[2];for(d=[],h=0,b=c;h<b.length;h++)if(y=b[h],m=f.Uri.parse(y.fileName),S=f.editor.getModel(m),S)d.push({resource:m,edit:{range:this._textSpanToRange(S,y.textSpan),text:a}});else throw new Error("Unknown URI "+m+".");return[2,{edits:d}]}})})},r}(_),M,I;function te(t){I=K(t,"typescript")}function re(t){M=K(t,"javascript")}function ne(){return new Promise(function(t,r){if(!M)return r("JavaScript not registered!");t(M)})}function ie(){return new Promise(function(t,r){if(!I)return r("TypeScript not registered!");t(I)})}function K(t,r){var e=new V(r,t),s=function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return e.getLanguageServiceWorker.apply(e,o)},a=new j(s);return f.languages.registerCompletionItemProvider(r,new B(s)),f.languages.registerSignatureHelpProvider(r,new J(s)),f.languages.registerHoverProvider(r,new z(s)),f.languages.registerDocumentHighlightProvider(r,new G(s)),f.languages.registerDefinitionProvider(r,new Q(a,s)),f.languages.registerReferenceProvider(r,new X(a,s)),f.languages.registerDocumentSymbolProvider(r,new Y(s)),f.languages.registerDocumentRangeFormattingEditProvider(r,new Z(s)),f.languages.registerOnTypeFormattingEditProvider(r,new $(s)),f.languages.registerCodeActionProvider(r,new q(s)),f.languages.registerRenameProvider(r,new ee(s)),new U(a,t,r,s),s}}}]);
